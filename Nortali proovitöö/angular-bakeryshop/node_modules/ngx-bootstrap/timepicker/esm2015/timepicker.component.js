/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/* tslint:disable:no-forward-ref max-file-line-count */
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, forwardRef, Input, Output, ViewEncapsulation } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { TimepickerActions } from './reducer/timepicker.actions';
import { TimepickerStore } from './reducer/timepicker.store';
import { getControlsValue } from './timepicker-controls.util';
import { TimepickerConfig } from './timepicker.config';
import { isValidDate, padNumber, parseTime, isInputValid, isHourInputValid, isMinuteInputValid, isSecondInputValid, isInputLimitValid } from './timepicker.utils';
/** @type {?} */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';

const _c0 = [1, "text-center", 3, "hidden"];
const _c1 = [1, "btn", "btn-link", 3, "click"];
const _c2 = [1, "bs-chevron", "bs-chevron-up"];
const _c3 = [4, "ngIf"];
const _c4 = [1, "form-group"];
const _c5 = ["type", "text", "placeholder", "HH", "maxlength", "2", 1, "form-control", "text-center", "bs-timepicker-field", 3, "readonly", "disabled", "value", "wheel", "keydown.ArrowUp", "keydown.ArrowDown", "change"];
const _c6 = ["class", "form-group", 3, "has-error", 4, "ngIf"];
const _c7 = [1, "bs-chevron", "bs-chevron-down"];
function TimepickerComponent_td_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵtext(1, "\u00A0\u00A0\u00A0");
    ɵngcc0.ɵɵelementEnd();
} }
function TimepickerComponent_td_7_Template(rf, ctx) { if (rf & 1) {
    const _r1575 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵelementStart(1, "a", _c1);
    ɵngcc0.ɵɵstyling();
    ɵngcc0.ɵɵlistener("click", function TimepickerComponent_td_7_Template_a_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r1575); const ctx_r1574 = ɵngcc0.ɵɵnextContext(); return ctx_r1574.changeMinutes(ctx_r1574.minuteStep); });
    ɵngcc0.ɵɵelement(2, "span", _c2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1557 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵselect(1);
    ɵngcc0.ɵɵclassProp("disabled", !ctx_r1557.canIncrementMinutes || !ctx_r1557.isEditable);
    ɵngcc0.ɵɵstylingApply();
} }
function TimepickerComponent_td_8_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵtext(1, "\u00A0");
    ɵngcc0.ɵɵelementEnd();
} }
function TimepickerComponent_td_9_Template(rf, ctx) { if (rf & 1) {
    const _r1577 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵelementStart(1, "a", _c1);
    ɵngcc0.ɵɵstyling();
    ɵngcc0.ɵɵlistener("click", function TimepickerComponent_td_9_Template_a_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r1577); const ctx_r1576 = ɵngcc0.ɵɵnextContext(); return ctx_r1576.changeSeconds(ctx_r1576.secondsStep); });
    ɵngcc0.ɵɵelement(2, "span", _c2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1559 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵselect(1);
    ɵngcc0.ɵɵclassProp("disabled", !ctx_r1559.canIncrementSeconds || !ctx_r1559.isEditable);
    ɵngcc0.ɵɵstylingApply();
} }
function TimepickerComponent_td_10_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵtext(1, "\u00A0\u00A0\u00A0");
    ɵngcc0.ɵɵelementEnd();
} }
function TimepickerComponent_td_11_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "td");
} }
function TimepickerComponent_td_15_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵtext(1, "\u00A0:\u00A0");
    ɵngcc0.ɵɵelementEnd();
} }
const _c8 = ["type", "text", "placeholder", "MM", "maxlength", "2", 1, "form-control", "text-center", "bs-timepicker-field", 3, "readonly", "disabled", "value", "wheel", "keydown.ArrowUp", "keydown.ArrowDown", "change"];
function TimepickerComponent_td_16_Template(rf, ctx) { if (rf & 1) {
    const _r1579 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "td", _c4);
    ɵngcc0.ɵɵstyling();
    ɵngcc0.ɵɵelementStart(1, "input", _c8);
    ɵngcc0.ɵɵstyling();
    ɵngcc0.ɵɵlistener("wheel", function TimepickerComponent_td_16_Template_input_wheel_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r1579); const ctx_r1578 = ɵngcc0.ɵɵnextContext(); ctx_r1578.prevDef($event); return ctx_r1578.changeMinutes(ctx_r1578.minuteStep * ctx_r1578.wheelSign($event), "wheel"); });
    ɵngcc0.ɵɵlistener("keydown.ArrowUp", function TimepickerComponent_td_16_Template_input_keydown_ArrowUp_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r1579); const ctx_r1580 = ɵngcc0.ɵɵnextContext(); return ctx_r1580.changeMinutes(ctx_r1580.minuteStep, "key"); });
    ɵngcc0.ɵɵlistener("keydown.ArrowDown", function TimepickerComponent_td_16_Template_input_keydown_ArrowDown_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r1579); const ctx_r1581 = ɵngcc0.ɵɵnextContext(); return ctx_r1581.changeMinutes(0 - ctx_r1581.minuteStep, "key"); });
    ɵngcc0.ɵɵlistener("change", function TimepickerComponent_td_16_Template_input_change_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r1579); const ctx_r1582 = ɵngcc0.ɵɵnextContext(); return ctx_r1582.updateMinutes($event.target.value); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1563 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("has-error", ctx_r1563.invalidMinutes);
    ɵngcc0.ɵɵstylingApply();
    ɵngcc0.ɵɵselect(1);
    ɵngcc0.ɵɵclassProp("is-invalid", ctx_r1563.invalidMinutes);
    ɵngcc0.ɵɵstylingApply();
    ɵngcc0.ɵɵproperty("readonly", ctx_r1563.readonlyInput)("disabled", ctx_r1563.disabled)("value", ctx_r1563.minutes);
} }
function TimepickerComponent_td_17_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵtext(1, "\u00A0:\u00A0");
    ɵngcc0.ɵɵelementEnd();
} }
const _c9 = ["type", "text", "placeholder", "SS", "maxlength", "2", 1, "form-control", "text-center", "bs-timepicker-field", 3, "readonly", "disabled", "value", "wheel", "keydown.ArrowUp", "keydown.ArrowDown", "change"];
function TimepickerComponent_td_18_Template(rf, ctx) { if (rf & 1) {
    const _r1584 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "td", _c4);
    ɵngcc0.ɵɵstyling();
    ɵngcc0.ɵɵelementStart(1, "input", _c9);
    ɵngcc0.ɵɵstyling();
    ɵngcc0.ɵɵlistener("wheel", function TimepickerComponent_td_18_Template_input_wheel_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r1584); const ctx_r1583 = ɵngcc0.ɵɵnextContext(); ctx_r1583.prevDef($event); return ctx_r1583.changeSeconds(ctx_r1583.secondsStep * ctx_r1583.wheelSign($event), "wheel"); });
    ɵngcc0.ɵɵlistener("keydown.ArrowUp", function TimepickerComponent_td_18_Template_input_keydown_ArrowUp_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r1584); const ctx_r1585 = ɵngcc0.ɵɵnextContext(); return ctx_r1585.changeSeconds(ctx_r1585.secondsStep, "key"); });
    ɵngcc0.ɵɵlistener("keydown.ArrowDown", function TimepickerComponent_td_18_Template_input_keydown_ArrowDown_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r1584); const ctx_r1586 = ɵngcc0.ɵɵnextContext(); return ctx_r1586.changeSeconds(0 - ctx_r1586.secondsStep, "key"); });
    ɵngcc0.ɵɵlistener("change", function TimepickerComponent_td_18_Template_input_change_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r1584); const ctx_r1587 = ɵngcc0.ɵɵnextContext(); return ctx_r1587.updateSeconds($event.target.value); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1565 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("has-error", ctx_r1565.invalidSeconds);
    ɵngcc0.ɵɵstylingApply();
    ɵngcc0.ɵɵselect(1);
    ɵngcc0.ɵɵclassProp("is-invalid", ctx_r1565.invalidSeconds);
    ɵngcc0.ɵɵstylingApply();
    ɵngcc0.ɵɵproperty("readonly", ctx_r1565.readonlyInput)("disabled", ctx_r1565.disabled)("value", ctx_r1565.seconds);
} }
function TimepickerComponent_td_19_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵtext(1, "\u00A0\u00A0\u00A0");
    ɵngcc0.ɵɵelementEnd();
} }
const _c10 = ["type", "button", 1, "btn", "btn-default", "text-center", 3, "disabled", "click"];
function TimepickerComponent_td_20_Template(rf, ctx) { if (rf & 1) {
    const _r1589 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵelementStart(1, "button", _c10);
    ɵngcc0.ɵɵstyling();
    ɵngcc0.ɵɵlistener("click", function TimepickerComponent_td_20_Template_button_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r1589); const ctx_r1588 = ɵngcc0.ɵɵnextContext(); return ctx_r1588.toggleMeridian(); });
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1567 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵselect(1);
    ɵngcc0.ɵɵclassProp("disabled", !ctx_r1567.isEditable || !ctx_r1567.canToggleMeridian);
    ɵngcc0.ɵɵstylingApply();
    ɵngcc0.ɵɵproperty("disabled", !ctx_r1567.isEditable || !ctx_r1567.canToggleMeridian);
    ɵngcc0.ɵɵselect(2);
    ɵngcc0.ɵɵtextInterpolate1("", ctx_r1567.meridian, " ");
} }
function TimepickerComponent_td_25_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵtext(1, "\u00A0\u00A0\u00A0");
    ɵngcc0.ɵɵelementEnd();
} }
function TimepickerComponent_td_26_Template(rf, ctx) { if (rf & 1) {
    const _r1591 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵelementStart(1, "a", _c1);
    ɵngcc0.ɵɵstyling();
    ɵngcc0.ɵɵlistener("click", function TimepickerComponent_td_26_Template_a_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r1591); const ctx_r1590 = ɵngcc0.ɵɵnextContext(); return ctx_r1590.changeMinutes(0 - ctx_r1590.minuteStep); });
    ɵngcc0.ɵɵelement(2, "span", _c7);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1569 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵselect(1);
    ɵngcc0.ɵɵclassProp("disabled", !ctx_r1569.canDecrementMinutes || !ctx_r1569.isEditable);
    ɵngcc0.ɵɵstylingApply();
} }
function TimepickerComponent_td_27_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵtext(1, "\u00A0");
    ɵngcc0.ɵɵelementEnd();
} }
function TimepickerComponent_td_28_Template(rf, ctx) { if (rf & 1) {
    const _r1593 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵelementStart(1, "a", _c1);
    ɵngcc0.ɵɵstyling();
    ɵngcc0.ɵɵlistener("click", function TimepickerComponent_td_28_Template_a_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r1593); const ctx_r1592 = ɵngcc0.ɵɵnextContext(); return ctx_r1592.changeSeconds(0 - ctx_r1592.secondsStep); });
    ɵngcc0.ɵɵelement(2, "span", _c7);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1571 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵselect(1);
    ɵngcc0.ɵɵclassProp("disabled", !ctx_r1571.canDecrementSeconds || !ctx_r1571.isEditable);
    ɵngcc0.ɵɵstylingApply();
} }
function TimepickerComponent_td_29_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵtext(1, "\u00A0\u00A0\u00A0");
    ɵngcc0.ɵɵelementEnd();
} }
function TimepickerComponent_td_30_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "td");
} }
export const TIMEPICKER_CONTROL_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    /* tslint:disable-next-line: no-use-before-declare */
    useExisting: forwardRef((/**
     * @return {?}
     */
    () => TimepickerComponent)),
    multi: true
};
export class TimepickerComponent {
    /**
     * @param {?} _config
     * @param {?} _cd
     * @param {?} _store
     * @param {?} _timepickerActions
     */
    constructor(_config, _cd, _store, _timepickerActions) {
        this._cd = _cd;
        this._store = _store;
        this._timepickerActions = _timepickerActions;
        /**
         * emits true if value is a valid date
         */
        this.isValid = new EventEmitter();
        // min\max validation for input fields
        this.invalidHours = false;
        this.invalidMinutes = false;
        this.invalidSeconds = false;
        // control value accessor methods
        // tslint:disable-next-line:no-any
        this.onChange = Function.prototype;
        // tslint:disable-next-line:no-any
        this.onTouched = Function.prototype;
        Object.assign(this, _config);
        this.timepickerSub = _store
            .select((/**
         * @param {?} state
         * @return {?}
         */
        state => state.value))
            .subscribe((/**
         * @param {?} value
         * @return {?}
         */
        (value) => {
            // update UI values if date changed
            this._renderTime(value);
            this.onChange(value);
            this._store.dispatch(this._timepickerActions.updateControls(getControlsValue(this)));
        }));
        _store
            .select((/**
         * @param {?} state
         * @return {?}
         */
        state => state.controls))
            .subscribe((/**
         * @param {?} controlsState
         * @return {?}
         */
        (controlsState) => {
            this.isValid.emit(isInputValid(this.hours, this.minutes, this.seconds, this.isPM()));
            Object.assign(this, controlsState);
            _cd.markForCheck();
        }));
    }
    /**
     * @deprecated - please use `isEditable` instead
     * @return {?}
     */
    get isSpinnersVisible() {
        return this.showSpinners && !this.readonlyInput;
    }
    /**
     * @return {?}
     */
    get isEditable() {
        return !(this.readonlyInput || this.disabled);
    }
    /**
     * @return {?}
     */
    resetValidation() {
        this.invalidHours = false;
        this.invalidMinutes = false;
        this.invalidSeconds = false;
    }
    /**
     * @return {?}
     */
    isPM() {
        return this.showMeridian && this.meridian === this.meridians[1];
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    prevDef($event) {
        $event.preventDefault();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    wheelSign($event) {
        return Math.sign($event.deltaY) * -1;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        this._store.dispatch(this._timepickerActions.updateControls(getControlsValue(this)));
    }
    /**
     * @param {?} step
     * @param {?=} source
     * @return {?}
     */
    changeHours(step, source = '') {
        this.resetValidation();
        this._store.dispatch(this._timepickerActions.changeHours({ step, source }));
    }
    /**
     * @param {?} step
     * @param {?=} source
     * @return {?}
     */
    changeMinutes(step, source = '') {
        this.resetValidation();
        this._store.dispatch(this._timepickerActions.changeMinutes({ step, source }));
    }
    /**
     * @param {?} step
     * @param {?=} source
     * @return {?}
     */
    changeSeconds(step, source = '') {
        this.resetValidation();
        this._store.dispatch(this._timepickerActions.changeSeconds({ step, source }));
    }
    /**
     * @param {?} hours
     * @return {?}
     */
    updateHours(hours) {
        this.resetValidation();
        this.hours = hours;
        /** @type {?} */
        const isValid = isHourInputValid(this.hours, this.isPM()) && this.isValidLimit();
        if (!isValid) {
            this.invalidHours = true;
            this.isValid.emit(false);
            this.onChange(null);
            return;
        }
        this._updateTime();
    }
    /**
     * @param {?} minutes
     * @return {?}
     */
    updateMinutes(minutes) {
        this.resetValidation();
        this.minutes = minutes;
        /** @type {?} */
        const isValid = isMinuteInputValid(this.minutes) && this.isValidLimit();
        if (!isValid) {
            this.invalidMinutes = true;
            this.isValid.emit(false);
            this.onChange(null);
            return;
        }
        this._updateTime();
    }
    /**
     * @param {?} seconds
     * @return {?}
     */
    updateSeconds(seconds) {
        this.resetValidation();
        this.seconds = seconds;
        /** @type {?} */
        const isValid = isSecondInputValid(this.seconds) && this.isValidLimit();
        if (!isValid) {
            this.invalidSeconds = true;
            this.isValid.emit(false);
            this.onChange(null);
            return;
        }
        this._updateTime();
    }
    /**
     * @return {?}
     */
    isValidLimit() {
        return isInputLimitValid({
            hour: this.hours,
            minute: this.minutes,
            seconds: this.seconds,
            isPM: this.isPM()
        }, this.max, this.min);
    }
    /**
     * @return {?}
     */
    _updateTime() {
        /** @type {?} */
        const _seconds = this.showSeconds ? this.seconds : void 0;
        /** @type {?} */
        const _minutes = this.showMinutes ? this.minutes : void 0;
        if (!isInputValid(this.hours, _minutes, _seconds, this.isPM())) {
            this.isValid.emit(false);
            this.onChange(null);
            return;
        }
        this._store.dispatch(this._timepickerActions.setTime({
            hour: this.hours,
            minute: this.minutes,
            seconds: this.seconds,
            isPM: this.isPM()
        }));
    }
    /**
     * @return {?}
     */
    toggleMeridian() {
        if (!this.showMeridian || !this.isEditable) {
            return;
        }
        /** @type {?} */
        const _hoursPerDayHalf = 12;
        this._store.dispatch(this._timepickerActions.changeHours({
            step: _hoursPerDayHalf,
            source: ''
        }));
    }
    /**
     * Write a new value to the element.
     * @param {?} obj
     * @return {?}
     */
    writeValue(obj) {
        if (isValidDate(obj)) {
            this._store.dispatch(this._timepickerActions.writeValue(parseTime(obj)));
        }
        else if (obj == null) {
            this._store.dispatch(this._timepickerActions.writeValue(null));
        }
    }
    /**
     * Set the function to be called when the control receives a change event.
     * @param {?} fn
     * @return {?}
     */
    // tslint:disable-next-line:no-any
    registerOnChange(fn) {
        this.onChange = fn;
    }
    /**
     * Set the function to be called when the control receives a touch event.
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    /**
     * This function is called when the control status changes to or from "disabled".
     * Depending on the value, it will enable or disable the appropriate DOM element.
     *
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
        this._cd.markForCheck();
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.timepickerSub.unsubscribe();
    }
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    _renderTime(value) {
        if (!isValidDate(value)) {
            this.hours = '';
            this.minutes = '';
            this.seconds = '';
            this.meridian = this.meridians[0];
            return;
        }
        /** @type {?} */
        const _value = parseTime(value);
        /** @type {?} */
        const _hoursPerDayHalf = 12;
        /** @type {?} */
        let _hours = _value.getHours();
        if (this.showMeridian) {
            this.meridian = this.meridians[_hours >= _hoursPerDayHalf ? 1 : 0];
            _hours = _hours % _hoursPerDayHalf;
            // should be 12 PM, not 00 PM
            if (_hours === 0) {
                _hours = _hoursPerDayHalf;
            }
        }
        this.hours = padNumber(_hours);
        this.minutes = padNumber(_value.getMinutes());
        this.seconds = padNumber(_value.getUTCSeconds());
    }
}
TimepickerComponent.ngComponentDef = ɵngcc0.ɵɵdefineComponent({ type: TimepickerComponent, selectors: [["timepicker"]], factory: function TimepickerComponent_Factory(t) { return new (t || TimepickerComponent)(ɵngcc0.ɵɵdirectiveInject(TimepickerConfig), ɵngcc0.ɵɵdirectiveInject(ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(TimepickerStore), ɵngcc0.ɵɵdirectiveInject(TimepickerActions)); }, inputs: { disabled: "disabled", hourStep: "hourStep", minuteStep: "minuteStep", secondsStep: "secondsStep", readonlyInput: "readonlyInput", mousewheel: "mousewheel", arrowkeys: "arrowkeys", showSpinners: "showSpinners", showMeridian: "showMeridian", showMinutes: "showMinutes", showSeconds: "showSeconds", meridians: "meridians", min: "min", max: "max" }, outputs: { isValid: "isValid" }, features: [ɵngcc0.ɵɵProvidersFeature([TIMEPICKER_CONTROL_VALUE_ACCESSOR, TimepickerStore]), ɵngcc0.ɵɵNgOnChangesFeature()], consts: 31, vars: 27, template: function TimepickerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "table");
        ɵngcc0.ɵɵelementStart(1, "tbody");
        ɵngcc0.ɵɵelementStart(2, "tr", _c0);
        ɵngcc0.ɵɵelementStart(3, "td");
        ɵngcc0.ɵɵelementStart(4, "a", _c1);
        ɵngcc0.ɵɵstyling();
        ɵngcc0.ɵɵlistener("click", function TimepickerComponent_Template_a_click_4_listener($event) { return ctx.changeHours(ctx.hourStep); });
        ɵngcc0.ɵɵelement(5, "span", _c2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(6, TimepickerComponent_td_6_Template, 2, 0, "td", _c3);
        ɵngcc0.ɵɵtemplate(7, TimepickerComponent_td_7_Template, 3, 1, "td", _c3);
        ɵngcc0.ɵɵtemplate(8, TimepickerComponent_td_8_Template, 2, 0, "td", _c3);
        ɵngcc0.ɵɵtemplate(9, TimepickerComponent_td_9_Template, 3, 1, "td", _c3);
        ɵngcc0.ɵɵtemplate(10, TimepickerComponent_td_10_Template, 2, 0, "td", _c3);
        ɵngcc0.ɵɵtemplate(11, TimepickerComponent_td_11_Template, 1, 0, "td", _c3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(12, "tr");
        ɵngcc0.ɵɵelementStart(13, "td", _c4);
        ɵngcc0.ɵɵstyling();
        ɵngcc0.ɵɵelementStart(14, "input", _c5);
        ɵngcc0.ɵɵstyling();
        ɵngcc0.ɵɵlistener("wheel", function TimepickerComponent_Template_input_wheel_14_listener($event) { ctx.prevDef($event); return ctx.changeHours(ctx.hourStep * ctx.wheelSign($event), "wheel"); });
        ɵngcc0.ɵɵlistener("keydown.ArrowUp", function TimepickerComponent_Template_input_keydown_ArrowUp_14_listener($event) { return ctx.changeHours(ctx.hourStep, "key"); });
        ɵngcc0.ɵɵlistener("keydown.ArrowDown", function TimepickerComponent_Template_input_keydown_ArrowDown_14_listener($event) { return ctx.changeHours(0 - ctx.hourStep, "key"); });
        ɵngcc0.ɵɵlistener("change", function TimepickerComponent_Template_input_change_14_listener($event) { return ctx.updateHours($event.target.value); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(15, TimepickerComponent_td_15_Template, 2, 0, "td", _c3);
        ɵngcc0.ɵɵtemplate(16, TimepickerComponent_td_16_Template, 2, 5, "td", _c6);
        ɵngcc0.ɵɵtemplate(17, TimepickerComponent_td_17_Template, 2, 0, "td", _c3);
        ɵngcc0.ɵɵtemplate(18, TimepickerComponent_td_18_Template, 2, 5, "td", _c6);
        ɵngcc0.ɵɵtemplate(19, TimepickerComponent_td_19_Template, 2, 0, "td", _c3);
        ɵngcc0.ɵɵtemplate(20, TimepickerComponent_td_20_Template, 3, 3, "td", _c3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(21, "tr", _c0);
        ɵngcc0.ɵɵelementStart(22, "td");
        ɵngcc0.ɵɵelementStart(23, "a", _c1);
        ɵngcc0.ɵɵstyling();
        ɵngcc0.ɵɵlistener("click", function TimepickerComponent_Template_a_click_23_listener($event) { return ctx.changeHours(0 - ctx.hourStep); });
        ɵngcc0.ɵɵelement(24, "span", _c7);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(25, TimepickerComponent_td_25_Template, 2, 0, "td", _c3);
        ɵngcc0.ɵɵtemplate(26, TimepickerComponent_td_26_Template, 3, 1, "td", _c3);
        ɵngcc0.ɵɵtemplate(27, TimepickerComponent_td_27_Template, 2, 0, "td", _c3);
        ɵngcc0.ɵɵtemplate(28, TimepickerComponent_td_28_Template, 3, 1, "td", _c3);
        ɵngcc0.ɵɵtemplate(29, TimepickerComponent_td_29_Template, 2, 0, "td", _c3);
        ɵngcc0.ɵɵtemplate(30, TimepickerComponent_td_30_Template, 1, 0, "td", _c3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵselect(2);
        ɵngcc0.ɵɵproperty("hidden", !ctx.showSpinners);
        ɵngcc0.ɵɵselect(4);
        ɵngcc0.ɵɵclassProp("disabled", !ctx.canIncrementHours || !ctx.isEditable);
        ɵngcc0.ɵɵstylingApply();
        ɵngcc0.ɵɵselect(6);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showMinutes);
        ɵngcc0.ɵɵselect(7);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showMinutes);
        ɵngcc0.ɵɵselect(8);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showSeconds);
        ɵngcc0.ɵɵselect(9);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showSeconds);
        ɵngcc0.ɵɵselect(10);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showMeridian);
        ɵngcc0.ɵɵselect(11);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showMeridian);
        ɵngcc0.ɵɵselect(13);
        ɵngcc0.ɵɵclassProp("has-error", ctx.invalidHours);
        ɵngcc0.ɵɵstylingApply();
        ɵngcc0.ɵɵselect(14);
        ɵngcc0.ɵɵclassProp("is-invalid", ctx.invalidHours);
        ɵngcc0.ɵɵstylingApply();
        ɵngcc0.ɵɵproperty("readonly", ctx.readonlyInput)("disabled", ctx.disabled)("value", ctx.hours);
        ɵngcc0.ɵɵselect(15);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showMinutes);
        ɵngcc0.ɵɵselect(16);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showMinutes);
        ɵngcc0.ɵɵselect(17);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showSeconds);
        ɵngcc0.ɵɵselect(18);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showSeconds);
        ɵngcc0.ɵɵselect(19);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showMeridian);
        ɵngcc0.ɵɵselect(20);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showMeridian);
        ɵngcc0.ɵɵselect(21);
        ɵngcc0.ɵɵproperty("hidden", !ctx.showSpinners);
        ɵngcc0.ɵɵselect(23);
        ɵngcc0.ɵɵclassProp("disabled", !ctx.canDecrementHours || !ctx.isEditable);
        ɵngcc0.ɵɵstylingApply();
        ɵngcc0.ɵɵselect(25);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showMinutes);
        ɵngcc0.ɵɵselect(26);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showMinutes);
        ɵngcc0.ɵɵselect(27);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showSeconds);
        ɵngcc0.ɵɵselect(28);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showSeconds);
        ɵngcc0.ɵɵselect(29);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showMeridian);
        ɵngcc0.ɵɵselect(30);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showMeridian);
    } }, directives: [ɵngcc1.NgIf], styles: ["\n    .bs-chevron {\n      border-style: solid;\n      display: block;\n      width: 9px;\n      height: 9px;\n      position: relative;\n      border-width: 3px 0px 0 3px;\n    }\n\n    .bs-chevron-up {\n      -webkit-transform: rotate(45deg);\n      transform: rotate(45deg);\n      top: 2px;\n    }\n\n    .bs-chevron-down {\n      -webkit-transform: rotate(-135deg);\n      transform: rotate(-135deg);\n      top: -2px;\n    }\n\n    .bs-timepicker-field {\n      width: 50px;\n    }\n  "], encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ ɵngcc0.ɵsetClassMetadata(TimepickerComponent, [{
        type: Component,
        args: [{
                selector: 'timepicker',
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [TIMEPICKER_CONTROL_VALUE_ACCESSOR, TimepickerStore],
                template: "<table>\n  <tbody>\n  <tr class=\"text-center\" [hidden]=\"!showSpinners\">\n    <!-- increment hours button-->\n    <td>\n      <a class=\"btn btn-link\" [class.disabled]=\"!canIncrementHours || !isEditable\"\n         (click)=\"changeHours(hourStep)\"\n      ><span class=\"bs-chevron bs-chevron-up\"></span></a>\n    </td>\n    <!-- divider -->\n    <td *ngIf=\"showMinutes\">&nbsp;&nbsp;&nbsp;</td>\n    <!-- increment minutes button -->\n    <td *ngIf=\"showMinutes\">\n      <a class=\"btn btn-link\" [class.disabled]=\"!canIncrementMinutes || !isEditable\"\n         (click)=\"changeMinutes(minuteStep)\"\n      ><span class=\"bs-chevron bs-chevron-up\"></span></a>\n    </td>\n    <!-- divider -->\n    <td *ngIf=\"showSeconds\">&nbsp;</td>\n    <!-- increment seconds button -->\n    <td *ngIf=\"showSeconds\">\n      <a class=\"btn btn-link\" [class.disabled]=\"!canIncrementSeconds || !isEditable\"\n         (click)=\"changeSeconds(secondsStep)\">\n        <span class=\"bs-chevron bs-chevron-up\"></span>\n      </a>\n    </td>\n    <!-- space between -->\n    <td *ngIf=\"showMeridian\">&nbsp;&nbsp;&nbsp;</td>\n    <!-- meridian placeholder-->\n    <td *ngIf=\"showMeridian\"></td>\n  </tr>\n  <tr>\n    <!-- hours -->\n    <td class=\"form-group\" [class.has-error]=\"invalidHours\">\n      <input type=\"text\" [class.is-invalid]=\"invalidHours\"\n             class=\"form-control text-center bs-timepicker-field\"\n             placeholder=\"HH\"\n             maxlength=\"2\"\n             [readonly]=\"readonlyInput\"\n             [disabled]=\"disabled\"\n             [value]=\"hours\"\n             (wheel)=\"prevDef($event);changeHours(hourStep * wheelSign($event), 'wheel')\"\n             (keydown.ArrowUp)=\"changeHours(hourStep, 'key')\"\n             (keydown.ArrowDown)=\"changeHours(-hourStep, 'key')\"\n             (change)=\"updateHours($event.target.value)\"></td>\n    <!-- divider -->\n    <td *ngIf=\"showMinutes\">&nbsp;:&nbsp;</td>\n    <!-- minutes -->\n    <td class=\"form-group\" *ngIf=\"showMinutes\" [class.has-error]=\"invalidMinutes\">\n      <input type=\"text\" [class.is-invalid]=\"invalidMinutes\"\n             class=\"form-control text-center bs-timepicker-field\"\n             placeholder=\"MM\"\n             maxlength=\"2\"\n             [readonly]=\"readonlyInput\"\n             [disabled]=\"disabled\"\n             [value]=\"minutes\"\n             (wheel)=\"prevDef($event);changeMinutes(minuteStep * wheelSign($event), 'wheel')\"\n             (keydown.ArrowUp)=\"changeMinutes(minuteStep, 'key')\"\n             (keydown.ArrowDown)=\"changeMinutes(-minuteStep, 'key')\"\n             (change)=\"updateMinutes($event.target.value)\">\n    </td>\n    <!-- divider -->\n    <td *ngIf=\"showSeconds\">&nbsp;:&nbsp;</td>\n    <!-- seconds -->\n    <td class=\"form-group\" *ngIf=\"showSeconds\" [class.has-error]=\"invalidSeconds\">\n      <input type=\"text\" [class.is-invalid]=\"invalidSeconds\"\n             class=\"form-control text-center bs-timepicker-field\"\n             placeholder=\"SS\"\n             maxlength=\"2\"\n             [readonly]=\"readonlyInput\"\n             [disabled]=\"disabled\"\n             [value]=\"seconds\"\n             (wheel)=\"prevDef($event);changeSeconds(secondsStep * wheelSign($event), 'wheel')\"\n             (keydown.ArrowUp)=\"changeSeconds(secondsStep, 'key')\"\n             (keydown.ArrowDown)=\"changeSeconds(-secondsStep, 'key')\"\n             (change)=\"updateSeconds($event.target.value)\">\n    </td>\n    <!-- space between -->\n    <td *ngIf=\"showMeridian\">&nbsp;&nbsp;&nbsp;</td>\n    <!-- meridian -->\n    <td *ngIf=\"showMeridian\">\n      <button type=\"button\" class=\"btn btn-default text-center\"\n              [disabled]=\"!isEditable || !canToggleMeridian\"\n              [class.disabled]=\"!isEditable || !canToggleMeridian\"\n              (click)=\"toggleMeridian()\"\n      >{{ meridian }}\n      </button>\n    </td>\n  </tr>\n  <tr class=\"text-center\" [hidden]=\"!showSpinners\">\n    <!-- decrement hours button-->\n    <td>\n      <a class=\"btn btn-link\" [class.disabled]=\"!canDecrementHours || !isEditable\"\n         (click)=\"changeHours(-hourStep)\">\n        <span class=\"bs-chevron bs-chevron-down\"></span>\n      </a>\n    </td>\n    <!-- divider -->\n    <td *ngIf=\"showMinutes\">&nbsp;&nbsp;&nbsp;</td>\n    <!-- decrement minutes button-->\n    <td *ngIf=\"showMinutes\">\n      <a class=\"btn btn-link\" [class.disabled]=\"!canDecrementMinutes || !isEditable\"\n         (click)=\"changeMinutes(-minuteStep)\">\n        <span class=\"bs-chevron bs-chevron-down\"></span>\n      </a>\n    </td>\n    <!-- divider -->\n    <td *ngIf=\"showSeconds\">&nbsp;</td>\n    <!-- decrement seconds button-->\n    <td *ngIf=\"showSeconds\">\n      <a class=\"btn btn-link\" [class.disabled]=\"!canDecrementSeconds || !isEditable\"\n         (click)=\"changeSeconds(-secondsStep)\">\n        <span class=\"bs-chevron bs-chevron-down\"></span>\n      </a>\n    </td>\n    <!-- space between -->\n    <td *ngIf=\"showMeridian\">&nbsp;&nbsp;&nbsp;</td>\n    <!-- meridian placeholder-->\n    <td *ngIf=\"showMeridian\"></td>\n  </tr>\n  </tbody>\n</table>\n",
                encapsulation: ViewEncapsulation.None,
                styles: [`
    .bs-chevron {
      border-style: solid;
      display: block;
      width: 9px;
      height: 9px;
      position: relative;
      border-width: 3px 0px 0 3px;
    }

    .bs-chevron-up {
      -webkit-transform: rotate(45deg);
      transform: rotate(45deg);
      top: 2px;
    }

    .bs-chevron-down {
      -webkit-transform: rotate(-135deg);
      transform: rotate(-135deg);
      top: -2px;
    }

    .bs-timepicker-field {
      width: 50px;
    }
  `]
            }]
    }], function () { return [{ type: TimepickerConfig }, { type: ChangeDetectorRef }, { type: TimepickerStore }, { type: TimepickerActions }]; }, { constructor: [], _cd: [], _store: [], _timepickerActions: [], isValid: [{
            type: Output
        }], invalidHours: [], invalidMinutes: [], invalidSeconds: [], onChange: [], onTouched: [], timepickerSub: [], isSpinnersVisible: [], isEditable: [], resetValidation: [], isPM: [], prevDef: [], wheelSign: [], ngOnChanges: [], changeHours: [], changeMinutes: [], changeSeconds: [], updateHours: [], hours: [], updateMinutes: [], minutes: [], updateSeconds: [], seconds: [], isValidLimit: [], _updateTime: [], toggleMeridian: [], writeValue: [], registerOnChange: [], registerOnTouched: [], setDisabledState: [], disabled: [{
            type: Input
        }], ngOnDestroy: [], _renderTime: [], meridian: [], hourStep: [{
            type: Input
        }], minuteStep: [{
            type: Input
        }], secondsStep: [{
            type: Input
        }], readonlyInput: [{
            type: Input
        }], mousewheel: [{
            type: Input
        }], arrowkeys: [{
            type: Input
        }], showSpinners: [{
            type: Input
        }], showMeridian: [{
            type: Input
        }], showMinutes: [{
            type: Input
        }], showSeconds: [{
            type: Input
        }], meridians: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }] });
/** @nocollapse */
TimepickerComponent.ctorParameters = () => [
    { type: TimepickerConfig },
    { type: ChangeDetectorRef },
    { type: TimepickerStore },
    { type: TimepickerActions }
];
TimepickerComponent.propDecorators = {
    hourStep: [{ type: Input }],
    minuteStep: [{ type: Input }],
    secondsStep: [{ type: Input }],
    readonlyInput: [{ type: Input }],
    disabled: [{ type: Input }],
    mousewheel: [{ type: Input }],
    arrowkeys: [{ type: Input }],
    showSpinners: [{ type: Input }],
    showMeridian: [{ type: Input }],
    showMinutes: [{ type: Input }],
    showSeconds: [{ type: Input }],
    meridians: [{ type: Input }],
    min: [{ type: Input }],
    max: [{ type: Input }],
    isValid: [{ type: Output }]
};
if (false) {
    /**
     * hours change step
     * @type {?}
     */
    TimepickerComponent.prototype.hourStep;
    /**
     * hours change step
     * @type {?}
     */
    TimepickerComponent.prototype.minuteStep;
    /**
     * seconds change step
     * @type {?}
     */
    TimepickerComponent.prototype.secondsStep;
    /**
     * if true hours and minutes fields will be readonly
     * @type {?}
     */
    TimepickerComponent.prototype.readonlyInput;
    /**
     * if true hours and minutes fields will be disabled
     * @type {?}
     */
    TimepickerComponent.prototype.disabled;
    /**
     * if true scroll inside hours and minutes inputs will change time
     * @type {?}
     */
    TimepickerComponent.prototype.mousewheel;
    /**
     * if true the values of hours and minutes can be changed using the up/down arrow keys on the keyboard
     * @type {?}
     */
    TimepickerComponent.prototype.arrowkeys;
    /**
     * if true spinner arrows above and below the inputs will be shown
     * @type {?}
     */
    TimepickerComponent.prototype.showSpinners;
    /**
     * if true meridian button will be shown
     * @type {?}
     */
    TimepickerComponent.prototype.showMeridian;
    /**
     * show minutes in timepicker
     * @type {?}
     */
    TimepickerComponent.prototype.showMinutes;
    /**
     * show seconds in timepicker
     * @type {?}
     */
    TimepickerComponent.prototype.showSeconds;
    /**
     * meridian labels based on locale
     * @type {?}
     */
    TimepickerComponent.prototype.meridians;
    /**
     * minimum time user can select
     * @type {?}
     */
    TimepickerComponent.prototype.min;
    /**
     * maximum time user can select
     * @type {?}
     */
    TimepickerComponent.prototype.max;
    /**
     * emits true if value is a valid date
     * @type {?}
     */
    TimepickerComponent.prototype.isValid;
    /** @type {?} */
    TimepickerComponent.prototype.hours;
    /** @type {?} */
    TimepickerComponent.prototype.minutes;
    /** @type {?} */
    TimepickerComponent.prototype.seconds;
    /** @type {?} */
    TimepickerComponent.prototype.meridian;
    /** @type {?} */
    TimepickerComponent.prototype.invalidHours;
    /** @type {?} */
    TimepickerComponent.prototype.invalidMinutes;
    /** @type {?} */
    TimepickerComponent.prototype.invalidSeconds;
    /** @type {?} */
    TimepickerComponent.prototype.canIncrementHours;
    /** @type {?} */
    TimepickerComponent.prototype.canIncrementMinutes;
    /** @type {?} */
    TimepickerComponent.prototype.canIncrementSeconds;
    /** @type {?} */
    TimepickerComponent.prototype.canDecrementHours;
    /** @type {?} */
    TimepickerComponent.prototype.canDecrementMinutes;
    /** @type {?} */
    TimepickerComponent.prototype.canDecrementSeconds;
    /** @type {?} */
    TimepickerComponent.prototype.canToggleMeridian;
    /** @type {?} */
    TimepickerComponent.prototype.onChange;
    /** @type {?} */
    TimepickerComponent.prototype.onTouched;
    /** @type {?} */
    TimepickerComponent.prototype.timepickerSub;
    /**
     * @type {?}
     * @private
     */
    TimepickerComponent.prototype._cd;
    /**
     * @type {?}
     * @private
     */
    TimepickerComponent.prototype._store;
    /**
     * @type {?}
     * @private
     */
    TimepickerComponent.prototype._timepickerActions;
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImM6L1VzZXJzL2Fhcm9uL09uZURyaXZlL0Rlc2t0b3AvQW5ndWxhci0wNi0yMDIyLTIvTm9ydGFsaSBwcm9vdml0w7bDti9hbmd1bGFyLWJha2VyeXNob3Avbm9kZV9tb2R1bGVzL25neC1ib290c3RyYXAvdGltZXBpY2tlci9lc20yMDE1L3RpbWVwaWNrZXIuY29tcG9uZW50LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFhQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBMlRDLGFBbUNDIiwiZmlsZSI6InRpbWVwaWNrZXIuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlcyxleHRyYVJlcXVpcmUsbWlzc2luZ092ZXJyaWRlLG1pc3NpbmdSZXR1cm4sdW51c2VkUHJpdmF0ZU1lbWJlcnMsdXNlbGVzc0NvZGV9IGNoZWNrZWQgYnkgdHNjXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLWZvcndhcmQtcmVmIG1heC1maWxlLWxpbmUtY291bnQgKi9cbmltcG9ydCB7IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIGZvcndhcmRSZWYsIElucHV0LCBPdXRwdXQsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IFRpbWVwaWNrZXJBY3Rpb25zIH0gZnJvbSAnLi9yZWR1Y2VyL3RpbWVwaWNrZXIuYWN0aW9ucyc7XG5pbXBvcnQgeyBUaW1lcGlja2VyU3RvcmUgfSBmcm9tICcuL3JlZHVjZXIvdGltZXBpY2tlci5zdG9yZSc7XG5pbXBvcnQgeyBnZXRDb250cm9sc1ZhbHVlIH0gZnJvbSAnLi90aW1lcGlja2VyLWNvbnRyb2xzLnV0aWwnO1xuaW1wb3J0IHsgVGltZXBpY2tlckNvbmZpZyB9IGZyb20gJy4vdGltZXBpY2tlci5jb25maWcnO1xuaW1wb3J0IHsgaXNWYWxpZERhdGUsIHBhZE51bWJlciwgcGFyc2VUaW1lLCBpc0lucHV0VmFsaWQsIGlzSG91cklucHV0VmFsaWQsIGlzTWludXRlSW5wdXRWYWxpZCwgaXNTZWNvbmRJbnB1dFZhbGlkLCBpc0lucHV0TGltaXRWYWxpZCB9IGZyb20gJy4vdGltZXBpY2tlci51dGlscyc7XG4vKiogQHR5cGUgez99ICovXG5leHBvcnQgY29uc3QgVElNRVBJQ0tFUl9DT05UUk9MX1ZBTFVFX0FDQ0VTU09SID0ge1xuICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgIC8qIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tdXNlLWJlZm9yZS1kZWNsYXJlICovXG4gICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKC8qKlxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgKCkgPT4gVGltZXBpY2tlckNvbXBvbmVudCkpLFxuICAgIG11bHRpOiB0cnVlXG59O1xuZXhwb3J0IGNsYXNzIFRpbWVwaWNrZXJDb21wb25lbnQge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gX2NvbmZpZ1xuICAgICAqIEBwYXJhbSB7P30gX2NkXG4gICAgICogQHBhcmFtIHs/fSBfc3RvcmVcbiAgICAgKiBAcGFyYW0gez99IF90aW1lcGlja2VyQWN0aW9uc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKF9jb25maWcsIF9jZCwgX3N0b3JlLCBfdGltZXBpY2tlckFjdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fY2QgPSBfY2Q7XG4gICAgICAgIHRoaXMuX3N0b3JlID0gX3N0b3JlO1xuICAgICAgICB0aGlzLl90aW1lcGlja2VyQWN0aW9ucyA9IF90aW1lcGlja2VyQWN0aW9ucztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGVtaXRzIHRydWUgaWYgdmFsdWUgaXMgYSB2YWxpZCBkYXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlzVmFsaWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8vIG1pblxcbWF4IHZhbGlkYXRpb24gZm9yIGlucHV0IGZpZWxkc1xuICAgICAgICB0aGlzLmludmFsaWRIb3VycyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmludmFsaWRNaW51dGVzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW52YWxpZFNlY29uZHMgPSBmYWxzZTtcbiAgICAgICAgLy8gY29udHJvbCB2YWx1ZSBhY2Nlc3NvciBtZXRob2RzXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuICAgICAgICB0aGlzLm9uVG91Y2hlZCA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBfY29uZmlnKTtcbiAgICAgICAgdGhpcy50aW1lcGlja2VyU3ViID0gX3N0b3JlXG4gICAgICAgICAgICAuc2VsZWN0KCgvKipcbiAgICAgICAgICogQHBhcmFtIHs/fSBzdGF0ZVxuICAgICAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGUgPT4gc3RhdGUudmFsdWUpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoLyoqXG4gICAgICAgICAqIEBwYXJhbSB7P30gdmFsdWVcbiAgICAgICAgICogQHJldHVybiB7P31cbiAgICAgICAgICovXG4gICAgICAgICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgLy8gdXBkYXRlIFVJIHZhbHVlcyBpZiBkYXRlIGNoYW5nZWRcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlclRpbWUodmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZSh2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl90aW1lcGlja2VyQWN0aW9ucy51cGRhdGVDb250cm9scyhnZXRDb250cm9sc1ZhbHVlKHRoaXMpKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgX3N0b3JlXG4gICAgICAgICAgICAuc2VsZWN0KCgvKipcbiAgICAgICAgICogQHBhcmFtIHs/fSBzdGF0ZVxuICAgICAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGUgPT4gc3RhdGUuY29udHJvbHMpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoLyoqXG4gICAgICAgICAqIEBwYXJhbSB7P30gY29udHJvbHNTdGF0ZVxuICAgICAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAgICAgKi9cbiAgICAgICAgKGNvbnRyb2xzU3RhdGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNWYWxpZC5lbWl0KGlzSW5wdXRWYWxpZCh0aGlzLmhvdXJzLCB0aGlzLm1pbnV0ZXMsIHRoaXMuc2Vjb25kcywgdGhpcy5pc1BNKCkpKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgY29udHJvbHNTdGF0ZSk7XG4gICAgICAgICAgICBfY2QubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgLSBwbGVhc2UgdXNlIGBpc0VkaXRhYmxlYCBpbnN0ZWFkXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBnZXQgaXNTcGlubmVyc1Zpc2libGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3dTcGlubmVycyAmJiAhdGhpcy5yZWFkb25seUlucHV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIGdldCBpc0VkaXRhYmxlKCkge1xuICAgICAgICByZXR1cm4gISh0aGlzLnJlYWRvbmx5SW5wdXQgfHwgdGhpcy5kaXNhYmxlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLmludmFsaWRIb3VycyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmludmFsaWRNaW51dGVzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW52YWxpZFNlY29uZHMgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBpc1BNKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaG93TWVyaWRpYW4gJiYgdGhpcy5tZXJpZGlhbiA9PT0gdGhpcy5tZXJpZGlhbnNbMV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gJGV2ZW50XG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBwcmV2RGVmKCRldmVudCkge1xuICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSAkZXZlbnRcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIHdoZWVsU2lnbigkZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc2lnbigkZXZlbnQuZGVsdGFZKSAqIC0xO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IGNoYW5nZXNcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fdGltZXBpY2tlckFjdGlvbnMudXBkYXRlQ29udHJvbHMoZ2V0Q29udHJvbHNWYWx1ZSh0aGlzKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IHN0ZXBcbiAgICAgKiBAcGFyYW0gez89fSBzb3VyY2VcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIGNoYW5nZUhvdXJzKHN0ZXAsIHNvdXJjZSA9ICcnKSB7XG4gICAgICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX3RpbWVwaWNrZXJBY3Rpb25zLmNoYW5nZUhvdXJzKHsgc3RlcCwgc291cmNlIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSBzdGVwXG4gICAgICogQHBhcmFtIHs/PX0gc291cmNlXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBjaGFuZ2VNaW51dGVzKHN0ZXAsIHNvdXJjZSA9ICcnKSB7XG4gICAgICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX3RpbWVwaWNrZXJBY3Rpb25zLmNoYW5nZU1pbnV0ZXMoeyBzdGVwLCBzb3VyY2UgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IHN0ZXBcbiAgICAgKiBAcGFyYW0gez89fSBzb3VyY2VcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIGNoYW5nZVNlY29uZHMoc3RlcCwgc291cmNlID0gJycpIHtcbiAgICAgICAgdGhpcy5yZXNldFZhbGlkYXRpb24oKTtcbiAgICAgICAgdGhpcy5fc3RvcmUuZGlzcGF0Y2godGhpcy5fdGltZXBpY2tlckFjdGlvbnMuY2hhbmdlU2Vjb25kcyh7IHN0ZXAsIHNvdXJjZSB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gaG91cnNcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIHVwZGF0ZUhvdXJzKGhvdXJzKSB7XG4gICAgICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgICAgIHRoaXMuaG91cnMgPSBob3VycztcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBjb25zdCBpc1ZhbGlkID0gaXNIb3VySW5wdXRWYWxpZCh0aGlzLmhvdXJzLCB0aGlzLmlzUE0oKSkgJiYgdGhpcy5pc1ZhbGlkTGltaXQoKTtcbiAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLmludmFsaWRIb3VycyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmlzVmFsaWQuZW1pdChmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3VwZGF0ZVRpbWUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSBtaW51dGVzXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICB1cGRhdGVNaW51dGVzKG1pbnV0ZXMpIHtcbiAgICAgICAgdGhpcy5yZXNldFZhbGlkYXRpb24oKTtcbiAgICAgICAgdGhpcy5taW51dGVzID0gbWludXRlcztcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBjb25zdCBpc1ZhbGlkID0gaXNNaW51dGVJbnB1dFZhbGlkKHRoaXMubWludXRlcykgJiYgdGhpcy5pc1ZhbGlkTGltaXQoKTtcbiAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLmludmFsaWRNaW51dGVzID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNWYWxpZC5lbWl0KGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2UobnVsbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdXBkYXRlVGltZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IHNlY29uZHNcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIHVwZGF0ZVNlY29uZHMoc2Vjb25kcykge1xuICAgICAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgICAgICB0aGlzLnNlY29uZHMgPSBzZWNvbmRzO1xuICAgICAgICAvKiogQHR5cGUgez99ICovXG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBpc1NlY29uZElucHV0VmFsaWQodGhpcy5zZWNvbmRzKSAmJiB0aGlzLmlzVmFsaWRMaW1pdCgpO1xuICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuaW52YWxpZFNlY29uZHMgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pc1ZhbGlkLmVtaXQoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZShudWxsKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl91cGRhdGVUaW1lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgaXNWYWxpZExpbWl0KCkge1xuICAgICAgICByZXR1cm4gaXNJbnB1dExpbWl0VmFsaWQoe1xuICAgICAgICAgICAgaG91cjogdGhpcy5ob3VycyxcbiAgICAgICAgICAgIG1pbnV0ZTogdGhpcy5taW51dGVzLFxuICAgICAgICAgICAgc2Vjb25kczogdGhpcy5zZWNvbmRzLFxuICAgICAgICAgICAgaXNQTTogdGhpcy5pc1BNKClcbiAgICAgICAgfSwgdGhpcy5tYXgsIHRoaXMubWluKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBfdXBkYXRlVGltZSgpIHtcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBjb25zdCBfc2Vjb25kcyA9IHRoaXMuc2hvd1NlY29uZHMgPyB0aGlzLnNlY29uZHMgOiB2b2lkIDA7XG4gICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgY29uc3QgX21pbnV0ZXMgPSB0aGlzLnNob3dNaW51dGVzID8gdGhpcy5taW51dGVzIDogdm9pZCAwO1xuICAgICAgICBpZiAoIWlzSW5wdXRWYWxpZCh0aGlzLmhvdXJzLCBfbWludXRlcywgX3NlY29uZHMsIHRoaXMuaXNQTSgpKSkge1xuICAgICAgICAgICAgdGhpcy5pc1ZhbGlkLmVtaXQoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZShudWxsKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl90aW1lcGlja2VyQWN0aW9ucy5zZXRUaW1lKHtcbiAgICAgICAgICAgIGhvdXI6IHRoaXMuaG91cnMsXG4gICAgICAgICAgICBtaW51dGU6IHRoaXMubWludXRlcyxcbiAgICAgICAgICAgIHNlY29uZHM6IHRoaXMuc2Vjb25kcyxcbiAgICAgICAgICAgIGlzUE06IHRoaXMuaXNQTSgpXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICB0b2dnbGVNZXJpZGlhbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNob3dNZXJpZGlhbiB8fCAhdGhpcy5pc0VkaXRhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBjb25zdCBfaG91cnNQZXJEYXlIYWxmID0gMTI7XG4gICAgICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX3RpbWVwaWNrZXJBY3Rpb25zLmNoYW5nZUhvdXJzKHtcbiAgICAgICAgICAgIHN0ZXA6IF9ob3Vyc1BlckRheUhhbGYsXG4gICAgICAgICAgICBzb3VyY2U6ICcnXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGUgYSBuZXcgdmFsdWUgdG8gdGhlIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHs/fSBvYmpcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIHdyaXRlVmFsdWUob2JqKSB7XG4gICAgICAgIGlmIChpc1ZhbGlkRGF0ZShvYmopKSB7XG4gICAgICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCh0aGlzLl90aW1lcGlja2VyQWN0aW9ucy53cml0ZVZhbHVlKHBhcnNlVGltZShvYmopKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob2JqID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKHRoaXMuX3RpbWVwaWNrZXJBY3Rpb25zLndyaXRlVmFsdWUobnVsbCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGNvbnRyb2wgcmVjZWl2ZXMgYSBjaGFuZ2UgZXZlbnQuXG4gICAgICogQHBhcmFtIHs/fSBmblxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBjb250cm9sIHJlY2VpdmVzIGEgdG91Y2ggZXZlbnQuXG4gICAgICogQHBhcmFtIHs/fSBmblxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcbiAgICAgICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbiB0aGUgY29udHJvbCBzdGF0dXMgY2hhbmdlcyB0byBvciBmcm9tIFwiZGlzYWJsZWRcIi5cbiAgICAgKiBEZXBlbmRpbmcgb24gdGhlIHZhbHVlLCBpdCB3aWxsIGVuYWJsZSBvciBkaXNhYmxlIHRoZSBhcHByb3ByaWF0ZSBET00gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7P30gaXNEaXNhYmxlZFxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICAgICAgICB0aGlzLl9jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy50aW1lcGlja2VyU3ViLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHs/fSB2YWx1ZVxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgX3JlbmRlclRpbWUodmFsdWUpIHtcbiAgICAgICAgaWYgKCFpc1ZhbGlkRGF0ZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuaG91cnMgPSAnJztcbiAgICAgICAgICAgIHRoaXMubWludXRlcyA9ICcnO1xuICAgICAgICAgICAgdGhpcy5zZWNvbmRzID0gJyc7XG4gICAgICAgICAgICB0aGlzLm1lcmlkaWFuID0gdGhpcy5tZXJpZGlhbnNbMF07XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBjb25zdCBfdmFsdWUgPSBwYXJzZVRpbWUodmFsdWUpO1xuICAgICAgICAvKiogQHR5cGUgez99ICovXG4gICAgICAgIGNvbnN0IF9ob3Vyc1BlckRheUhhbGYgPSAxMjtcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBsZXQgX2hvdXJzID0gX3ZhbHVlLmdldEhvdXJzKCk7XG4gICAgICAgIGlmICh0aGlzLnNob3dNZXJpZGlhbikge1xuICAgICAgICAgICAgdGhpcy5tZXJpZGlhbiA9IHRoaXMubWVyaWRpYW5zW19ob3VycyA+PSBfaG91cnNQZXJEYXlIYWxmID8gMSA6IDBdO1xuICAgICAgICAgICAgX2hvdXJzID0gX2hvdXJzICUgX2hvdXJzUGVyRGF5SGFsZjtcbiAgICAgICAgICAgIC8vIHNob3VsZCBiZSAxMiBQTSwgbm90IDAwIFBNXG4gICAgICAgICAgICBpZiAoX2hvdXJzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgX2hvdXJzID0gX2hvdXJzUGVyRGF5SGFsZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhvdXJzID0gcGFkTnVtYmVyKF9ob3Vycyk7XG4gICAgICAgIHRoaXMubWludXRlcyA9IHBhZE51bWJlcihfdmFsdWUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgdGhpcy5zZWNvbmRzID0gcGFkTnVtYmVyKF92YWx1ZS5nZXRVVENTZWNvbmRzKCkpO1xuICAgIH1cbn1cblRpbWVwaWNrZXJDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ3RpbWVwaWNrZXInLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW1RJTUVQSUNLRVJfQ09OVFJPTF9WQUxVRV9BQ0NFU1NPUiwgVGltZXBpY2tlclN0b3JlXSxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8dGFibGU+XFxuICA8dGJvZHk+XFxuICA8dHIgY2xhc3M9XFxcInRleHQtY2VudGVyXFxcIiBbaGlkZGVuXT1cXFwiIXNob3dTcGlubmVyc1xcXCI+XFxuICAgIDwhLS0gaW5jcmVtZW50IGhvdXJzIGJ1dHRvbi0tPlxcbiAgICA8dGQ+XFxuICAgICAgPGEgY2xhc3M9XFxcImJ0biBidG4tbGlua1xcXCIgW2NsYXNzLmRpc2FibGVkXT1cXFwiIWNhbkluY3JlbWVudEhvdXJzIHx8ICFpc0VkaXRhYmxlXFxcIlxcbiAgICAgICAgIChjbGljayk9XFxcImNoYW5nZUhvdXJzKGhvdXJTdGVwKVxcXCJcXG4gICAgICA+PHNwYW4gY2xhc3M9XFxcImJzLWNoZXZyb24gYnMtY2hldnJvbi11cFxcXCI+PC9zcGFuPjwvYT5cXG4gICAgPC90ZD5cXG4gICAgPCEtLSBkaXZpZGVyIC0tPlxcbiAgICA8dGQgKm5nSWY9XFxcInNob3dNaW51dGVzXFxcIj4mbmJzcDsmbmJzcDsmbmJzcDs8L3RkPlxcbiAgICA8IS0tIGluY3JlbWVudCBtaW51dGVzIGJ1dHRvbiAtLT5cXG4gICAgPHRkICpuZ0lmPVxcXCJzaG93TWludXRlc1xcXCI+XFxuICAgICAgPGEgY2xhc3M9XFxcImJ0biBidG4tbGlua1xcXCIgW2NsYXNzLmRpc2FibGVkXT1cXFwiIWNhbkluY3JlbWVudE1pbnV0ZXMgfHwgIWlzRWRpdGFibGVcXFwiXFxuICAgICAgICAgKGNsaWNrKT1cXFwiY2hhbmdlTWludXRlcyhtaW51dGVTdGVwKVxcXCJcXG4gICAgICA+PHNwYW4gY2xhc3M9XFxcImJzLWNoZXZyb24gYnMtY2hldnJvbi11cFxcXCI+PC9zcGFuPjwvYT5cXG4gICAgPC90ZD5cXG4gICAgPCEtLSBkaXZpZGVyIC0tPlxcbiAgICA8dGQgKm5nSWY9XFxcInNob3dTZWNvbmRzXFxcIj4mbmJzcDs8L3RkPlxcbiAgICA8IS0tIGluY3JlbWVudCBzZWNvbmRzIGJ1dHRvbiAtLT5cXG4gICAgPHRkICpuZ0lmPVxcXCJzaG93U2Vjb25kc1xcXCI+XFxuICAgICAgPGEgY2xhc3M9XFxcImJ0biBidG4tbGlua1xcXCIgW2NsYXNzLmRpc2FibGVkXT1cXFwiIWNhbkluY3JlbWVudFNlY29uZHMgfHwgIWlzRWRpdGFibGVcXFwiXFxuICAgICAgICAgKGNsaWNrKT1cXFwiY2hhbmdlU2Vjb25kcyhzZWNvbmRzU3RlcClcXFwiPlxcbiAgICAgICAgPHNwYW4gY2xhc3M9XFxcImJzLWNoZXZyb24gYnMtY2hldnJvbi11cFxcXCI+PC9zcGFuPlxcbiAgICAgIDwvYT5cXG4gICAgPC90ZD5cXG4gICAgPCEtLSBzcGFjZSBiZXR3ZWVuIC0tPlxcbiAgICA8dGQgKm5nSWY9XFxcInNob3dNZXJpZGlhblxcXCI+Jm5ic3A7Jm5ic3A7Jm5ic3A7PC90ZD5cXG4gICAgPCEtLSBtZXJpZGlhbiBwbGFjZWhvbGRlci0tPlxcbiAgICA8dGQgKm5nSWY9XFxcInNob3dNZXJpZGlhblxcXCI+PC90ZD5cXG4gIDwvdHI+XFxuICA8dHI+XFxuICAgIDwhLS0gaG91cnMgLS0+XFxuICAgIDx0ZCBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCIgW2NsYXNzLmhhcy1lcnJvcl09XFxcImludmFsaWRIb3Vyc1xcXCI+XFxuICAgICAgPGlucHV0IHR5cGU9XFxcInRleHRcXFwiIFtjbGFzcy5pcy1pbnZhbGlkXT1cXFwiaW52YWxpZEhvdXJzXFxcIlxcbiAgICAgICAgICAgICBjbGFzcz1cXFwiZm9ybS1jb250cm9sIHRleHQtY2VudGVyIGJzLXRpbWVwaWNrZXItZmllbGRcXFwiXFxuICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVxcXCJISFxcXCJcXG4gICAgICAgICAgICAgbWF4bGVuZ3RoPVxcXCIyXFxcIlxcbiAgICAgICAgICAgICBbcmVhZG9ubHldPVxcXCJyZWFkb25seUlucHV0XFxcIlxcbiAgICAgICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCJcXG4gICAgICAgICAgICAgW3ZhbHVlXT1cXFwiaG91cnNcXFwiXFxuICAgICAgICAgICAgICh3aGVlbCk9XFxcInByZXZEZWYoJGV2ZW50KTtjaGFuZ2VIb3Vycyhob3VyU3RlcCAqIHdoZWVsU2lnbigkZXZlbnQpLCAnd2hlZWwnKVxcXCJcXG4gICAgICAgICAgICAgKGtleWRvd24uQXJyb3dVcCk9XFxcImNoYW5nZUhvdXJzKGhvdXJTdGVwLCAna2V5JylcXFwiXFxuICAgICAgICAgICAgIChrZXlkb3duLkFycm93RG93bik9XFxcImNoYW5nZUhvdXJzKC1ob3VyU3RlcCwgJ2tleScpXFxcIlxcbiAgICAgICAgICAgICAoY2hhbmdlKT1cXFwidXBkYXRlSG91cnMoJGV2ZW50LnRhcmdldC52YWx1ZSlcXFwiPjwvdGQ+XFxuICAgIDwhLS0gZGl2aWRlciAtLT5cXG4gICAgPHRkICpuZ0lmPVxcXCJzaG93TWludXRlc1xcXCI+Jm5ic3A7OiZuYnNwOzwvdGQ+XFxuICAgIDwhLS0gbWludXRlcyAtLT5cXG4gICAgPHRkIGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIiAqbmdJZj1cXFwic2hvd01pbnV0ZXNcXFwiIFtjbGFzcy5oYXMtZXJyb3JdPVxcXCJpbnZhbGlkTWludXRlc1xcXCI+XFxuICAgICAgPGlucHV0IHR5cGU9XFxcInRleHRcXFwiIFtjbGFzcy5pcy1pbnZhbGlkXT1cXFwiaW52YWxpZE1pbnV0ZXNcXFwiXFxuICAgICAgICAgICAgIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wgdGV4dC1jZW50ZXIgYnMtdGltZXBpY2tlci1maWVsZFxcXCJcXG4gICAgICAgICAgICAgcGxhY2Vob2xkZXI9XFxcIk1NXFxcIlxcbiAgICAgICAgICAgICBtYXhsZW5ndGg9XFxcIjJcXFwiXFxuICAgICAgICAgICAgIFtyZWFkb25seV09XFxcInJlYWRvbmx5SW5wdXRcXFwiXFxuICAgICAgICAgICAgIFtkaXNhYmxlZF09XFxcImRpc2FibGVkXFxcIlxcbiAgICAgICAgICAgICBbdmFsdWVdPVxcXCJtaW51dGVzXFxcIlxcbiAgICAgICAgICAgICAod2hlZWwpPVxcXCJwcmV2RGVmKCRldmVudCk7Y2hhbmdlTWludXRlcyhtaW51dGVTdGVwICogd2hlZWxTaWduKCRldmVudCksICd3aGVlbCcpXFxcIlxcbiAgICAgICAgICAgICAoa2V5ZG93bi5BcnJvd1VwKT1cXFwiY2hhbmdlTWludXRlcyhtaW51dGVTdGVwLCAna2V5JylcXFwiXFxuICAgICAgICAgICAgIChrZXlkb3duLkFycm93RG93bik9XFxcImNoYW5nZU1pbnV0ZXMoLW1pbnV0ZVN0ZXAsICdrZXknKVxcXCJcXG4gICAgICAgICAgICAgKGNoYW5nZSk9XFxcInVwZGF0ZU1pbnV0ZXMoJGV2ZW50LnRhcmdldC52YWx1ZSlcXFwiPlxcbiAgICA8L3RkPlxcbiAgICA8IS0tIGRpdmlkZXIgLS0+XFxuICAgIDx0ZCAqbmdJZj1cXFwic2hvd1NlY29uZHNcXFwiPiZuYnNwOzombmJzcDs8L3RkPlxcbiAgICA8IS0tIHNlY29uZHMgLS0+XFxuICAgIDx0ZCBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCIgKm5nSWY9XFxcInNob3dTZWNvbmRzXFxcIiBbY2xhc3MuaGFzLWVycm9yXT1cXFwiaW52YWxpZFNlY29uZHNcXFwiPlxcbiAgICAgIDxpbnB1dCB0eXBlPVxcXCJ0ZXh0XFxcIiBbY2xhc3MuaXMtaW52YWxpZF09XFxcImludmFsaWRTZWNvbmRzXFxcIlxcbiAgICAgICAgICAgICBjbGFzcz1cXFwiZm9ybS1jb250cm9sIHRleHQtY2VudGVyIGJzLXRpbWVwaWNrZXItZmllbGRcXFwiXFxuICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVxcXCJTU1xcXCJcXG4gICAgICAgICAgICAgbWF4bGVuZ3RoPVxcXCIyXFxcIlxcbiAgICAgICAgICAgICBbcmVhZG9ubHldPVxcXCJyZWFkb25seUlucHV0XFxcIlxcbiAgICAgICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCJcXG4gICAgICAgICAgICAgW3ZhbHVlXT1cXFwic2Vjb25kc1xcXCJcXG4gICAgICAgICAgICAgKHdoZWVsKT1cXFwicHJldkRlZigkZXZlbnQpO2NoYW5nZVNlY29uZHMoc2Vjb25kc1N0ZXAgKiB3aGVlbFNpZ24oJGV2ZW50KSwgJ3doZWVsJylcXFwiXFxuICAgICAgICAgICAgIChrZXlkb3duLkFycm93VXApPVxcXCJjaGFuZ2VTZWNvbmRzKHNlY29uZHNTdGVwLCAna2V5JylcXFwiXFxuICAgICAgICAgICAgIChrZXlkb3duLkFycm93RG93bik9XFxcImNoYW5nZVNlY29uZHMoLXNlY29uZHNTdGVwLCAna2V5JylcXFwiXFxuICAgICAgICAgICAgIChjaGFuZ2UpPVxcXCJ1cGRhdGVTZWNvbmRzKCRldmVudC50YXJnZXQudmFsdWUpXFxcIj5cXG4gICAgPC90ZD5cXG4gICAgPCEtLSBzcGFjZSBiZXR3ZWVuIC0tPlxcbiAgICA8dGQgKm5nSWY9XFxcInNob3dNZXJpZGlhblxcXCI+Jm5ic3A7Jm5ic3A7Jm5ic3A7PC90ZD5cXG4gICAgPCEtLSBtZXJpZGlhbiAtLT5cXG4gICAgPHRkICpuZ0lmPVxcXCJzaG93TWVyaWRpYW5cXFwiPlxcbiAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0IHRleHQtY2VudGVyXFxcIlxcbiAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cXFwiIWlzRWRpdGFibGUgfHwgIWNhblRvZ2dsZU1lcmlkaWFuXFxcIlxcbiAgICAgICAgICAgICAgW2NsYXNzLmRpc2FibGVkXT1cXFwiIWlzRWRpdGFibGUgfHwgIWNhblRvZ2dsZU1lcmlkaWFuXFxcIlxcbiAgICAgICAgICAgICAgKGNsaWNrKT1cXFwidG9nZ2xlTWVyaWRpYW4oKVxcXCJcXG4gICAgICA+e3sgbWVyaWRpYW4gfX1cXG4gICAgICA8L2J1dHRvbj5cXG4gICAgPC90ZD5cXG4gIDwvdHI+XFxuICA8dHIgY2xhc3M9XFxcInRleHQtY2VudGVyXFxcIiBbaGlkZGVuXT1cXFwiIXNob3dTcGlubmVyc1xcXCI+XFxuICAgIDwhLS0gZGVjcmVtZW50IGhvdXJzIGJ1dHRvbi0tPlxcbiAgICA8dGQ+XFxuICAgICAgPGEgY2xhc3M9XFxcImJ0biBidG4tbGlua1xcXCIgW2NsYXNzLmRpc2FibGVkXT1cXFwiIWNhbkRlY3JlbWVudEhvdXJzIHx8ICFpc0VkaXRhYmxlXFxcIlxcbiAgICAgICAgIChjbGljayk9XFxcImNoYW5nZUhvdXJzKC1ob3VyU3RlcClcXFwiPlxcbiAgICAgICAgPHNwYW4gY2xhc3M9XFxcImJzLWNoZXZyb24gYnMtY2hldnJvbi1kb3duXFxcIj48L3NwYW4+XFxuICAgICAgPC9hPlxcbiAgICA8L3RkPlxcbiAgICA8IS0tIGRpdmlkZXIgLS0+XFxuICAgIDx0ZCAqbmdJZj1cXFwic2hvd01pbnV0ZXNcXFwiPiZuYnNwOyZuYnNwOyZuYnNwOzwvdGQ+XFxuICAgIDwhLS0gZGVjcmVtZW50IG1pbnV0ZXMgYnV0dG9uLS0+XFxuICAgIDx0ZCAqbmdJZj1cXFwic2hvd01pbnV0ZXNcXFwiPlxcbiAgICAgIDxhIGNsYXNzPVxcXCJidG4gYnRuLWxpbmtcXFwiIFtjbGFzcy5kaXNhYmxlZF09XFxcIiFjYW5EZWNyZW1lbnRNaW51dGVzIHx8ICFpc0VkaXRhYmxlXFxcIlxcbiAgICAgICAgIChjbGljayk9XFxcImNoYW5nZU1pbnV0ZXMoLW1pbnV0ZVN0ZXApXFxcIj5cXG4gICAgICAgIDxzcGFuIGNsYXNzPVxcXCJicy1jaGV2cm9uIGJzLWNoZXZyb24tZG93blxcXCI+PC9zcGFuPlxcbiAgICAgIDwvYT5cXG4gICAgPC90ZD5cXG4gICAgPCEtLSBkaXZpZGVyIC0tPlxcbiAgICA8dGQgKm5nSWY9XFxcInNob3dTZWNvbmRzXFxcIj4mbmJzcDs8L3RkPlxcbiAgICA8IS0tIGRlY3JlbWVudCBzZWNvbmRzIGJ1dHRvbi0tPlxcbiAgICA8dGQgKm5nSWY9XFxcInNob3dTZWNvbmRzXFxcIj5cXG4gICAgICA8YSBjbGFzcz1cXFwiYnRuIGJ0bi1saW5rXFxcIiBbY2xhc3MuZGlzYWJsZWRdPVxcXCIhY2FuRGVjcmVtZW50U2Vjb25kcyB8fCAhaXNFZGl0YWJsZVxcXCJcXG4gICAgICAgICAoY2xpY2spPVxcXCJjaGFuZ2VTZWNvbmRzKC1zZWNvbmRzU3RlcClcXFwiPlxcbiAgICAgICAgPHNwYW4gY2xhc3M9XFxcImJzLWNoZXZyb24gYnMtY2hldnJvbi1kb3duXFxcIj48L3NwYW4+XFxuICAgICAgPC9hPlxcbiAgICA8L3RkPlxcbiAgICA8IS0tIHNwYWNlIGJldHdlZW4gLS0+XFxuICAgIDx0ZCAqbmdJZj1cXFwic2hvd01lcmlkaWFuXFxcIj4mbmJzcDsmbmJzcDsmbmJzcDs8L3RkPlxcbiAgICA8IS0tIG1lcmlkaWFuIHBsYWNlaG9sZGVyLS0+XFxuICAgIDx0ZCAqbmdJZj1cXFwic2hvd01lcmlkaWFuXFxcIj48L3RkPlxcbiAgPC90cj5cXG4gIDwvdGJvZHk+XFxuPC90YWJsZT5cXG5cIixcbiAgICAgICAgICAgICAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW2BcbiAgICAuYnMtY2hldnJvbiB7XG4gICAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICB3aWR0aDogOXB4O1xuICAgICAgaGVpZ2h0OiA5cHg7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBib3JkZXItd2lkdGg6IDNweCAwcHggMCAzcHg7XG4gICAgfVxuXG4gICAgLmJzLWNoZXZyb24tdXAge1xuICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XG4gICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XG4gICAgICB0b3A6IDJweDtcbiAgICB9XG5cbiAgICAuYnMtY2hldnJvbi1kb3duIHtcbiAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoLTEzNWRlZyk7XG4gICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtMTM1ZGVnKTtcbiAgICAgIHRvcDogLTJweDtcbiAgICB9XG5cbiAgICAuYnMtdGltZXBpY2tlci1maWVsZCB7XG4gICAgICB3aWR0aDogNTBweDtcbiAgICB9XG4gIGBdXG4gICAgICAgICAgICB9XSB9XG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5UaW1lcGlja2VyQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogVGltZXBpY2tlckNvbmZpZyB9LFxuICAgIHsgdHlwZTogQ2hhbmdlRGV0ZWN0b3JSZWYgfSxcbiAgICB7IHR5cGU6IFRpbWVwaWNrZXJTdG9yZSB9LFxuICAgIHsgdHlwZTogVGltZXBpY2tlckFjdGlvbnMgfVxuXTtcblRpbWVwaWNrZXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgaG91clN0ZXA6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1pbnV0ZVN0ZXA6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNlY29uZHNTdGVwOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICByZWFkb25seUlucHV0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkaXNhYmxlZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbW91c2V3aGVlbDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYXJyb3drZXlzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaG93U3Bpbm5lcnM6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNob3dNZXJpZGlhbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2hvd01pbnV0ZXM6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNob3dTZWNvbmRzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBtZXJpZGlhbnM6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1pbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbWF4OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBpc1ZhbGlkOiBbeyB0eXBlOiBPdXRwdXQgfV1cbn07XG5pZiAoZmFsc2UpIHtcbiAgICAvKipcbiAgICAgKiBob3VycyBjaGFuZ2Ugc3RlcFxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIFRpbWVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmhvdXJTdGVwO1xuICAgIC8qKlxuICAgICAqIGhvdXJzIGNoYW5nZSBzdGVwXG4gICAgICogQHR5cGUgez99XG4gICAgICovXG4gICAgVGltZXBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUubWludXRlU3RlcDtcbiAgICAvKipcbiAgICAgKiBzZWNvbmRzIGNoYW5nZSBzdGVwXG4gICAgICogQHR5cGUgez99XG4gICAgICovXG4gICAgVGltZXBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuc2Vjb25kc1N0ZXA7XG4gICAgLyoqXG4gICAgICogaWYgdHJ1ZSBob3VycyBhbmQgbWludXRlcyBmaWVsZHMgd2lsbCBiZSByZWFkb25seVxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIFRpbWVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLnJlYWRvbmx5SW5wdXQ7XG4gICAgLyoqXG4gICAgICogaWYgdHJ1ZSBob3VycyBhbmQgbWludXRlcyBmaWVsZHMgd2lsbCBiZSBkaXNhYmxlZFxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIFRpbWVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmRpc2FibGVkO1xuICAgIC8qKlxuICAgICAqIGlmIHRydWUgc2Nyb2xsIGluc2lkZSBob3VycyBhbmQgbWludXRlcyBpbnB1dHMgd2lsbCBjaGFuZ2UgdGltZVxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIFRpbWVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm1vdXNld2hlZWw7XG4gICAgLyoqXG4gICAgICogaWYgdHJ1ZSB0aGUgdmFsdWVzIG9mIGhvdXJzIGFuZCBtaW51dGVzIGNhbiBiZSBjaGFuZ2VkIHVzaW5nIHRoZSB1cC9kb3duIGFycm93IGtleXMgb24gdGhlIGtleWJvYXJkXG4gICAgICogQHR5cGUgez99XG4gICAgICovXG4gICAgVGltZXBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuYXJyb3drZXlzO1xuICAgIC8qKlxuICAgICAqIGlmIHRydWUgc3Bpbm5lciBhcnJvd3MgYWJvdmUgYW5kIGJlbG93IHRoZSBpbnB1dHMgd2lsbCBiZSBzaG93blxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIFRpbWVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLnNob3dTcGlubmVycztcbiAgICAvKipcbiAgICAgKiBpZiB0cnVlIG1lcmlkaWFuIGJ1dHRvbiB3aWxsIGJlIHNob3duXG4gICAgICogQHR5cGUgez99XG4gICAgICovXG4gICAgVGltZXBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuc2hvd01lcmlkaWFuO1xuICAgIC8qKlxuICAgICAqIHNob3cgbWludXRlcyBpbiB0aW1lcGlja2VyXG4gICAgICogQHR5cGUgez99XG4gICAgICovXG4gICAgVGltZXBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuc2hvd01pbnV0ZXM7XG4gICAgLyoqXG4gICAgICogc2hvdyBzZWNvbmRzIGluIHRpbWVwaWNrZXJcbiAgICAgKiBAdHlwZSB7P31cbiAgICAgKi9cbiAgICBUaW1lcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5zaG93U2Vjb25kcztcbiAgICAvKipcbiAgICAgKiBtZXJpZGlhbiBsYWJlbHMgYmFzZWQgb24gbG9jYWxlXG4gICAgICogQHR5cGUgez99XG4gICAgICovXG4gICAgVGltZXBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUubWVyaWRpYW5zO1xuICAgIC8qKlxuICAgICAqIG1pbmltdW0gdGltZSB1c2VyIGNhbiBzZWxlY3RcbiAgICAgKiBAdHlwZSB7P31cbiAgICAgKi9cbiAgICBUaW1lcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5taW47XG4gICAgLyoqXG4gICAgICogbWF4aW11bSB0aW1lIHVzZXIgY2FuIHNlbGVjdFxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIFRpbWVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm1heDtcbiAgICAvKipcbiAgICAgKiBlbWl0cyB0cnVlIGlmIHZhbHVlIGlzIGEgdmFsaWQgZGF0ZVxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIFRpbWVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmlzVmFsaWQ7XG4gICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgIFRpbWVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmhvdXJzO1xuICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICBUaW1lcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5taW51dGVzO1xuICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICBUaW1lcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5zZWNvbmRzO1xuICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICBUaW1lcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5tZXJpZGlhbjtcbiAgICAvKiogQHR5cGUgez99ICovXG4gICAgVGltZXBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuaW52YWxpZEhvdXJzO1xuICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICBUaW1lcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5pbnZhbGlkTWludXRlcztcbiAgICAvKiogQHR5cGUgez99ICovXG4gICAgVGltZXBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuaW52YWxpZFNlY29uZHM7XG4gICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgIFRpbWVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmNhbkluY3JlbWVudEhvdXJzO1xuICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICBUaW1lcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5jYW5JbmNyZW1lbnRNaW51dGVzO1xuICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICBUaW1lcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5jYW5JbmNyZW1lbnRTZWNvbmRzO1xuICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICBUaW1lcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5jYW5EZWNyZW1lbnRIb3VycztcbiAgICAvKiogQHR5cGUgez99ICovXG4gICAgVGltZXBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuY2FuRGVjcmVtZW50TWludXRlcztcbiAgICAvKiogQHR5cGUgez99ICovXG4gICAgVGltZXBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuY2FuRGVjcmVtZW50U2Vjb25kcztcbiAgICAvKiogQHR5cGUgez99ICovXG4gICAgVGltZXBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuY2FuVG9nZ2xlTWVyaWRpYW47XG4gICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgIFRpbWVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm9uQ2hhbmdlO1xuICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICBUaW1lcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5vblRvdWNoZWQ7XG4gICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgIFRpbWVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLnRpbWVwaWNrZXJTdWI7XG4gICAgLyoqXG4gICAgICogQHR5cGUgez99XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBUaW1lcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5fY2Q7XG4gICAgLyoqXG4gICAgICogQHR5cGUgez99XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBUaW1lcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5fc3RvcmU7XG4gICAgLyoqXG4gICAgICogQHR5cGUgez99XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBUaW1lcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5fdGltZXBpY2tlckFjdGlvbnM7XG59XG4iXX0=